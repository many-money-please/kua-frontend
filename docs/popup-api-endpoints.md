# 팝업 관리 API 엔드포인트 설명

백엔드에서 제공하는 팝업 관리 API 엔드포인트들의 용도와 사용 방법을 설명합니다.

## 📋 엔드포인트 목록

### 1. **POST /api/popups** - 팝업 생성
**용도**: 새로운 팝업을 생성합니다.

**사용 위치**: 관리자 페이지에서 "신규 생성" 버튼 클릭 시

**요청 본문 예시**:
```json
{
  "title": "수영 대회일정 공지사항",
  "startDate": "2025-11-10",
  "endDate": "2026-05-15",
  "isExposed": true,
  "order": 1
}
```

---

### 2. **GET /api/popups/{id}** - 특정 팝업 조회
**용도**: ID로 특정 팝업의 상세 정보를 가져옵니다.

**사용 위치**: 팝업 수정 페이지에서 기존 데이터를 불러올 때

---

### 3. **PUT /api/popups/{id}** - 팝업 수정
**용도**: 기존 팝업의 정보를 수정합니다.

**사용 위치**: 관리자 페이지에서 팝업 정보를 변경할 때

**요청 본문 예시**:
```json
{
  "title": "수정된 제목",
  "startDate": "2025-11-10",
  "endDate": "2026-05-15",
  "isExposed": true,
  "order": 1
}
```

---

### 4. **DELETE /api/popups/{id}** - 팝업 삭제
**용도**: 특정 팝업을 삭제합니다.

**사용 위치**: 관리자 페이지에서 삭제 버튼 클릭 시

---

### 5. **PATCH /api/popups/{id}/toggle** - 팝업 노출 상태 토글 ⭐
**용도**: 팝업의 노출 여부를 간단하게 토글(켜기/끄기)합니다.

**사용 위치**: 관리자 페이지에서 노출 여부 스위치를 클릭할 때

**특징**: 
- PUT으로 전체 수정할 필요 없이 노출 상태만 변경
- 더 간단하고 빠른 API 호출

---

### 6. **GET /api/popups/active** - 활성 팝업 목록 조회
**용도**: 현재 노출 중인 활성 팝업 목록을 가져옵니다.

**사용 위치**: 
- 메인 페이지에서 표시할 팝업 목록
- 현재 기간 내에 노출되어야 하는 팝업만 필터링

**특징**: 
- `isExposed: true`이고 현재 날짜가 `startDate`와 `endDate` 사이인 팝업만 반환

---

### 7. **GET /api/popups/admin** - 관리자용 팝업 목록 조회 ⭐
**용도**: 관리자 페이지에서 모든 팝업 목록을 가져옵니다.

**사용 위치**: 관리자 페이지의 팝업 관리 화면

**특징**: 
- 노출 여부와 관계없이 모든 팝업 반환
- 관리자가 전체 팝업을 관리할 수 있도록 함

---

### 8. **GET /api/popups/display** - 표시용 팝업 목록 조회
**용도**: 사용자 화면에 표시할 팝업 목록을 가져옵니다.

**사용 위치**: 
- 메인 페이지의 팝업 모달
- 사용자에게 보여줄 팝업만 필터링

**특징**: 
- `isExposed: true`이고 현재 날짜가 기간 내인 팝업만 반환
- `active`와 유사하지만 표시 우선순위나 추가 필터링이 있을 수 있음

---

## 🔄 현재 코드에서의 사용

### 관리자 페이지 (`MainPopupManager`)
- **목록 조회**: `GET /api/popups/admin` 사용
- **노출 토글**: `PATCH /api/popups/{id}/toggle` 사용
- **삭제**: `DELETE /api/popups/{id}` 사용
- **순서 변경**: 현재는 클라이언트에서만 처리 (백엔드에 reorder 엔드포인트 없음)

### 사용자 화면 (향후 구현)
- **팝업 표시**: `GET /api/popups/display` 또는 `GET /api/popups/active` 사용

---

## 💡 주요 차이점

| 엔드포인트 | 노출 여부 | 날짜 필터 | 용도 |
|----------|---------|---------|------|
| `/api/popups/admin` | 모든 팝업 | 없음 | 관리자 관리용 |
| `/api/popups/active` | 노출 중만 | 현재 날짜 기준 | 활성 팝업 조회 |
| `/api/popups/display` | 노출 중만 | 현재 날짜 기준 | 사용자 화면 표시용 |

---

## ⚠️ 주의사항

1. **순서 변경**: 백엔드에 순서 변경 전용 엔드포인트가 없습니다. 순서를 변경하려면 각 팝업의 `order` 필드를 PUT으로 수정해야 합니다.

2. **노출 토글**: `PATCH /api/popups/{id}/toggle`을 사용하면 PUT으로 전체 수정할 필요 없이 간단하게 상태를 변경할 수 있습니다.

3. **날짜 형식**: 모든 날짜는 `YYYY-MM-DD` 형식으로 전송해야 합니다.

